## 1. 개요
- **목적**: QMS 시스템 접근을 위한 사용자 등록(회원가입) 및 인증(로그인) 기능 제공  
- **특징**:  
  - 모든 사용자는 QMS 웹을 사용하기 전에 회원가입 필수  
  - 소셜 로그인은 지원하지 않음 (내부 DB 기반 인증만 제공)  
  - 회원가입과 로그인은 같은 사용자 테이블(`users`)을 참조  

---

## 2. 주요 기능

### 2.1 회원가입
- 아이디(username), 비밀번호(password), 이름(실명), 부서, 직급, 핸드폰 번호 입력  
- 아이디 중복 체크  
- 비밀번호 정책 적용 (최소 8자, 숫자/문자/특수문자 포함)  
- 권한 레벨(role_level)은 기본값 `0 (게스트 사용자)`로 설정  
- 계정 상태(status)는 기본값 `locked (계정잠금)`로 설정
- 가입 완료 시 로그인 페이지로 이동  

### 2.2 로그인
- 아이디(username), 비밀번호(password) 입력  
- 비밀번호는 해시값 검증 후 인증 처리  
- 로그인 성공 시 JWT 토큰 발급 (또는 세션 방식)  
- 로그인 실패 시 에러 메시지 표시  
- 로그인 실패 5회 이상 시 계정 잠금  

---

## 3. 화면 레이아웃

### 3.1 회원가입 페이지
- **상단**: 제목 "회원가입"  
- **중앙**: 입력폼 (아이디, 비밀번호, 이름, 부서, 직급, 핸드폰 번호)  
- **하단**: "가입하기" 버튼, "로그인으로 이동" 링크  

### 3.2 로그인 페이지
- **상단**: 제목 "로그인"  
- **중앙**: 입력폼 (아이디, 비밀번호)  
- **하단**: "로그인" 버튼, "회원가입" 링크  

---

## 4. 데이터베이스 설계

### 테이블명: `users`
| 컬럼명             | 타입           | 설명                                         |
| --------------- | ------------ | ------------------------------------------ |
| id              | BIGINT (PK)  | 내부 식별자                                     |
| username        | VARCHAR(50)  | 아이디                                        |
| password_hash   | VARCHAR(255) | 비밀번호 해시                                    |
| name            | VARCHAR(50)  | 사용자 이름                                     |
| department      | VARCHAR(100) | 부서                                         |
| position        | VARCHAR(50)  | 직급                                         |
| phone_number    | VARCHAR(20)  | 핸드폰 번호                                     |
| role_level      | INT          | 권한 레벨 (0=게스트, 1=실무자, 2=관리자)                |
| status          | VARCHAR(20)  | 계정 상태 (active, locked, suspended, deleted) |
| failed_attempts | INT          | 로그인 실패 횟수 (기본값 0)                          |
| last_failed_at  | DATETIME     | 마지막 실패 시각                                  |
| created_at      | DATETIME     | 가입일                                        |
| updated_at      | DATETIME     | 수정일                                        |
| last_login_at   | DATETIME     | 최종 로그인 시간                                  |

---

## 5. API 요구사항

### 5.1 회원가입
- **Endpoint**: `POST /api/signup`  
- **Request**
```json
{
  "username": "hong123",
  "password": "Password@123",
  "name": "홍길동",
  "department": "품질관리부",
  "position": "대리",
  "phone_number": "010-1234-5678"
}
```
- **Response**
```json
{
  "message": "회원가입이 완료되었습니다.",
  "user_id": 1
}

```

### 5.2 아이디 중복 체크
- **Endpoint**: `GET /api/users/check-username?username={value}`
- **Response**
```json
{
	"available": true
}
```

### 5.3 로그인
- **Endpoint**: `POST /api/login`
- **Request**
```json
{
	"username": "hong123",   "password": "Password@123"
}
```
- **Response (성공 시)**
```json
{
	"message": "로그인 성공",
	"token": "jwt_token_string",
	"user": {
		"id": 1,
		"username": "hong123",
		"name": "홍길동",
		"department": "품질관리부",
		"position": "대리",
		"role_level": 1
		}
}
```
- **Response (실패 시)**
```json
{
	"error": "아이디 또는 비밀번호가 올바르지 않습니다."
}
```

---

## 6. 인증 및 보안 정책
- **비밀번호 보관**: 반드시 해시화 저장 (BCrypt 권장) 
- **JWT 인증**: Access Token(12시간), Refresh Token(7일) 구조 권장
- **계정 상태 관리**:
    - active: 정상
    - locked: 로그인 실패 5회 → 계정 잠금
    - suspended: 관리자가 직접 일시 정지  
    - deleted: 논리적 삭제 (로그인 불가, 데이터 참조는 유지)  
- **HTTPS 필수**: 평문 전송 금지

---

## 7. 비기능 요구사항
- **성능**: 응답 2초 이내
- **동시 로그인 정책**: 동일 계정 다중 로그인 허용
- **로그 기록**: 회원가입, 로그인 성공/실패 이벤트 모두 감사 로그 저장