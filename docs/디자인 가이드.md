## 0) 디자인 목표
- **정보 흐름**: *요약 → 추세 → 근거 데이터* (KPI 타일 → 핵심 차트 → 목록/테이블)
- **시선 유도**: 색은 **데이터(차트·상태·액션)** 에만 절약 사용, 배경/카드는 뉴트럴 톤으로 소음 최소화
- **판단 즉시성**: 수치∙상태를 **숫자 우선** 타이포와 **의미색(semantic)** 으로 빠르게 인지
- **일관 제어부**: 카드 우상단에 기간/필터/메뉴 고정, 상단 바에 전역 검색/기간/알림 통합

---

## 1) 레이아웃 시스템

### 1.1 앱 셸
- **좌측 고정 내비**: 모듈(대시보드, 부적합, 출하검사, 수입검사, 감사, CAPA, 리포트, 설정)
- **상단 툴바**: 전역 **검색**, **기간 선택(최근 7/30/90일)**, 알림, 사용자 메뉴(역할 배지)
- **본문**: **카드형 그리드** (12-column, 24px 기본 간격)

### 1.2 그리드 & 간격
- **12-column**, 최대 폭 1280–1440px
- **Spacing scale**: 4, 8, 12, 16, 24, 32, 48, 64
- **카드 내부 패딩**: 20–24px, 카드 간 간격 16–24px
- **라운드**: 카드 12px, 칩/배지 9999px(필)

### 1.3 카드 컴포지션
```
[타이틀] [보조 컨트롤(기간/정렬/…)]
------------------------------------
[메인 콘텐츠: 차트/테이블/폼]
[푸터(선택): Legend, 도움말, 통계 요약]
```

---

## 2) 컬러 시스템 (Design Tokens)

### 2.1 베이스 & 텍스트
- `bg/page`: `#F8FAFC`
- `bg/surface`: `#FFFFFF`
- `border/subtle`: `#E5E7EB`
- `text/primary`: `#111827`
- `text/secondary`: `#475569`
- `text/muted`: `#64748B`

### 2.2 포인트(액션/데이터)
- `accent/primary`: `#3B82F6` (파란 톤, 버튼/선형·막대 강조)
- `accent/secondary`: `#6366F1` (보랏빛, 보조 시리즈/하이라이트)
- **원칙**: 포인트 컬러는 **차트·CTA·활성 상태**에만 사용. 카드 배경/구획은 뉴트럴 유지.

### 2.3 의미색(Semantic)
- `success`: `#10B981` (합격, 개선 완료, 정상)
- `danger`: `#EF4444` (부적합, 리스크, 실패)
- `warning`: `#F59E0B` (기한 임박/주의)
- `info`: `#0EA5E9` (알림/정보)
- **QMS 매핑 예시**
  - **부적합(NCR) 상태**: Open=`danger`, Containment=`warning`, Dispositioned=`info`, Closed=`success`
  - **감사 상태**: Planned=`info`, In-Progress=`warning`, Completed=`success`, Overdue=`danger`
  - **출하/수입 검사**: Pass=`success`, Fail=`danger`, Pending=`info`

### 2.4 차트 팔레트(카테고리 7 이내)
`#6366F1`, `#3B82F6`, `#06B6D4`, `#22C55E`, `#F59E0B`, `#EF4444`, `#A855F7`

> **Do**: 의미색은 *상태*에만, 포인트색은 *데이터/액션*에만.  
> **Don’t**: 같은 화면에서 의미색과 데이터색을 혼용해 의미를 모호하게 만들지 않기.

---

## 3) 타이포그래피

### 3.1 폰트 & 스케일
- **권장 폰트**: Pretendard(ko) / Inter(en) – 시스템 폴백 허용
- **스케일 (rem)**
  - H1 1.75, H2 1.5, H3 1.25
  - Body 1.0, Small 0.875, Caption 0.75
- **숫자 우선**: KPI 숫자 폰트 사이즈는 레이블 대비 +2 단계, 레이블은 `text/secondary`

### 3.2 숫자 정렬 & 표기
- **테이블 숫자**: **우측 정렬**(자리수 비교 용이)
- **지표 표기**: 천단위 구분, 소수점 0–2자리, 단위/통화 명시(예: `₩`, `%`, `ppm`)
- **변화율**: `▲ +3.2%`(success), `▼ −1.8%`(danger) — 아이콘+색 동시 사용

---

## 4) 아이콘 & 일러스트
- **아이콘**: 선형(24px 기준), 복잡한 채색 금지
- **상태 아이콘**: success(체크), danger(경고/에러), warning(시계/삼각표지), info(정보)
- **빈 상태(Empty)**: 간단한 라인 일러스트 + 한줄 가이드 + 기본 액션 버튼

---

## 5) 데이터 시각화 원칙

- **한 카드 = 한 인사이트**: 축/범례 단순화, 2–3 시리즈 이내
- **기본형**
  - 추세: 선형(Line) 또는 막대(Bar)
  - 구성비: 도넛/파이
  - 우선순위/원인: 파레토(Bar + 누적선)
- **그래드/축**: y축 4–6 틱, 그리드 라인은 연한 `border/subtle`
- **레전드**: 우하단 정렬, 시리즈 색과 1:1 매핑
- **툴팁**: 값+단위+전년동기/전기간 대비(있으면) 동시 표기

---

## 6) 핵심 컴포넌트 (콘텐츠 ↔ UI)

### 6.1 KPI 타일
- **예시 항목**: `열린 NCR`, `DPPM`, `OTD(정시납품율)`, `수입 불합격률`, `감사 지연 건`
- **구성**: 큰 숫자 + 단위/레이블(secondary) + 변화율 배지(semantic) + 도움말(아이콘)
- **상호작용**: 타일 클릭 시 해당 모듈로 **필터 사전적용 드릴다운**

### 6.2 차트 카드
- **Sales → QMS 매핑 예시**
  - `NCR 추세(주별/월별)` – 막대 or 선형
  - `불량 유형(파레토)` – 막대 + 누적선
  - `6M 요인 분포` – 도넛 (Man/Method/Machine/Material/Measurement/Environment)
  - `공정별 불량률` – 그룹 막대
- **컨트롤**: 카드 우상단에 기간/그룹 기준(제품/라인/고객) 전환, `…` 메뉴(내보내기)

### 6.3 테이블 카드 (레지스터)
- **예시**: `부적합 레지스터`, `수입검사 이력`, `출하검사 결과`, `감사 일정`
- **컬럼 패턴**: **[상태칩]** | 코드/제목 | 모듈/라인/공정 | 품목/고객 | 담당자 | 날짜 | **수치(우정렬)** | 액션
- **행 밀도**: 정상(56–60px) / 조밀(44–48px) 토글
- **기능**: 다중 필터(상태/기간/품목/고객), 정렬, 고정 열, 열 보이기 토글, CSV/XLSX 내보내기

### 6.4 폼(부적합/NCR 작성)
- **섹션**: 문제 설명 → 6M 분류 → 임시조치(Containment) → 근본원인(5-Why/Fishbone 링크) → 시정조치(CA) → 검증 → 마감일/담당자
- **검증 피드백**: 인라인(validation 색상은 semantic), 필수 항목 별(✱)

### 6.5 필터 & 검색
- **전역 필터 바**: 기간, 공장/라인, 품목, 고객, 상태
- **로컬 필터 칩**: 적용된 필터를 칩으로 노출, 한 번에 해제 가능

### 6.6 배지/칩(상태)
- **형태**: 톤다운 배경 + 선명한 텍스트, 의미색 매핑
- **예시**: `Open`(danger), `Containment`(warning), `Dispositioned`(info), `Closed`(success)

### 6.7 권한 배지(역할)
- 0 **Guest**: 읽기 전용(회색 칩), 수정/삭제 **비활성** UI
- 1 **Practitioner**: CRUD 가능(파란 칩), 본인 담당 내 우선 노출
- 2 **Admin**: 관리자 페이지 접근(보라 칩), 역할/계정 관리

---

## 7) 상호작용 & 상태

- **Hover/Focus**: 버튼/링크/테이블 행에 **명확한 포커스 링**(2px, `accent/primary`)
- **Disabled**: 60–70% 투명도 + 커서 기본, 툴팁 설명(권한/필수조건 미충족 사유)
- **Empty**: “조건을 바꿔보세요 / 새 NCR 작성” 1차 행동 제안
- **피드백**: 성공(녹색 토스트), 실패(빨강 토스트 + 재시도), 경고(노랑 토스트)

---

## 8) 접근성(A11y)
- 텍스트 대비 **WCAG AA** 준수(일반 텍스트 4.5:1, 큰 텍스트 3:1)
- 키보드 내비게이션: `Tab` 순서 → 스킵 링크 → 초점 표시
- 테이블: 헤더에 `scope="col"`, 정렬 상태 `aria-sort` 제공
- 색 의존 금지: 아이콘/레이블/패턴 동시 사용

---

## 9) 샘플 화면 구성(권장)

### 9.1 QMS Overview
- **상단(4칸)**: `열린 NCR`, `DPPM`, `OTD`, `감사 지연`
- **중단(2칸)**: `NCR 추세(월별)`, `불량 유형 파레토`
- **하단(2칸)**: `6M 분포(도넛)`, `부적합 레지스터 (최근 30일)`

### 9.2 부적합(NCR) 모듈
- 좌측 필터(상태/라인/품목/고객/기간) + 테이블
- 카드 탭: `전체` / `내 담당` / `마감 임박`
- 우상단: `NCR 작성`(primary 버튼)

---

## 10) 카피라이팅 가이드(예시)
- **KPI 타이틀**: 최대 3단어, 단위는 숫자 옆에 (`DPPM`, `OTD %`)
- **컬럼명**: ‘무엇을 비교하는가’에 집중: `상태`, `품목`, `공정`, `고객`, `발생일`, `결함수`, `불량률`
- **버튼**: 동사 우선 – `NCR 작성`, `검사 등록`, `CSV 내보내기`
- **오류 메시지**: 해결 행동 포함 – “필수 항목입니다. 사유를 입력하세요.”

---

## 11) 디자인 토큰(JSON 예시)
```json
{
  "color": {
    "bg": { "page": "#F8FAFC", "surface": "#FFFFFF" },
    "border": { "subtle": "#E5E7EB" },
    "text": { "primary": "#111827", "secondary": "#475569", "muted": "#64748B" },
    "accent": { "primary": "#3B82F6", "secondary": "#6366F1" },
    "semantic": { "success": "#10B981", "danger": "#EF4444", "warning": "#F59E0B", "info": "#0EA5E9" },
    "chart": ["#6366F1", "#3B82F6", "#06B6D4", "#22C55E", "#F59E0B", "#EF4444", "#A855F7"]
  },
  "radius": { "card": 12, "chip": 9999, "input": 10 },
  "shadow": { "card": "0 1px 2px rgba(0,0,0,0.06)" },
  "spacing": [4, 8, 12, 16, 24, 32, 48, 64],
  "typography": {
    "fontFamily": { "base": "Pretendard, Inter, system-ui, sans-serif" },
    "sizeRem": { "h1": 1.75, "h2": 1.5, "h3": 1.25, "body": 1.0, "small": 0.875, "caption": 0.75 }
  },
  "kpi": {
    "delta": { "up": "semantic.success", "down": "semantic.danger" },
    "badgeStyle": { "radius": 9999, "paddingX": 8, "paddingY": 2 }
  },
  "table": {
    "density": { "regular": 56, "compact": 48 },
    "numberAlign": "right",
    "zebra": false
  },
  "roles": {
    "guest": { "label": "Guest", "color": "#64748B" },
    "practitioner": { "label": "Practitioner", "color": "#3B82F6" },
    "admin": { "label": "Admin", "color": "#6366F1" }
  },
  "states": {
    "ncr": { "open": "semantic.danger", "containment": "semantic.warning", "dispositioned": "semantic.info", "closed": "semantic.success" },
    "audit": { "planned": "semantic.info", "inProgress": "semantic.warning", "completed": "semantic.success", "overdue": "semantic.danger" },
    "inspection": { "pass": "semantic.success", "fail": "semantic.danger", "pending": "semantic.info" }
  }
}
```

---

## 12) 적용 체크리스트
- [ ] 상단 3–5개 KPI 타일: 큰 숫자 + 변화율 배지(semantic)
- [ ] 중단 2개 핵심 차트: `NCR 추세`, `파레토`(or `6M 분포`)
- [ ] 하단 데이터 테이블: 필터/정렬/열 토글/내보내기 포함
- [ ] 의미색은 상태에만, 포인트색은 데이터·액션에만 사용
- [ ] 테이블 수치 우정렬, 단위/천단위 규칙 통일
- [ ] 카드 우상단 컨트롤 위치 일관 유지(기간/정렬/…)
- [ ] 접근성(AA) 대비·포커스 링 확인, 키보드 사용성 점검
- [ ] Guest(읽기), Practitioner(CRUD), Admin(관리자) 권한별 비활성 처리/가시성 정의
