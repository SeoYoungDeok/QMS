# KPI 목표 관리 사용 가이드

## 🎯 개요

KPI 목표 관리 페이지는 조직의 **연간 품질 목표**를 설정하고 관리하는 기능입니다.

**관리 가능한 KPI:**
- 📉 **불량율** (%, ppm)
- 💰 **F-COST** (원)
- 📞 **고객 불만 건수** (건)

---

## 🚀 시작하기

### 접속 경로
```
http://localhost:3000/kpi-targets
```

### 권한 요구사항
- **게스트 (Level 0):** 조회만 가능
- **실무자 (Level 1) 이상:** 등록/수정/삭제 가능

---

## 📋 페이지 구조

### 1. 목표 관리 탭
KPI 목표 등록의 기본 안내 및 등록 버튼이 제공됩니다.

**기능:**
- 새 목표 등록 버튼 (실무자 이상)
- KPI 종류별 설명
- 등록 규칙 안내

### 2. 목표 목록 탭
등록된 KPI 목표를 조회하고 관리합니다.

**기능:**
- 연도별 필터링
- KPI 종류별 필터링
- 수정/삭제 (실무자 이상)
- 작성자 정보 확인

### 3. 과거 이력 비교 탭
선택한 KPI의 최근 6년 목표값 변화를 확인합니다.

**기능:**
- KPI 종류 선택
- 연도별 목표값 비교 테이블
- 최신/최대/최소 목표 통계

---

## ✨ 주요 기능 가이드

### 📝 KPI 목표 등록하기

1. **"목표 관리" 탭** 또는 **"목표 목록" 탭**에서 **"+ 새 목표 등록"** 클릭
2. 모달 창에서 정보 입력:
   - **연도:** 현재 연도 ~ 과거 5년 선택 가능
   - **KPI 종류:** 불량율/F-COST/고객 불만 건수 선택
   - **목표값:** 숫자 입력
   - **단위:** KPI 종류에 따라 자동 제한
3. **"등록"** 버튼 클릭

**예시:**
```
연도: 2025
KPI 종류: 불량율
목표값: 0.8
단위: %
```

### 🔄 불량율 단위 변환하기 (% ↔ ppm)

불량율 목표 등록 시, **단위 변환 도구**가 자동으로 표시됩니다.

**변환 공식:**
```
1% = 10,000 ppm
```

**사용 방법:**
1. 목표값 입력 (예: 0.8)
2. 현재 단위 선택 (예: %)
3. **"% → ppm"** 버튼 클릭
4. 자동으로 8000 ppm으로 변환됨

### ✏️ 목표 수정하기

1. **"목표 목록" 탭**에서 수정할 목표의 **"✏️ 수정"** 버튼 클릭
2. 모달 창에서 값 변경
3. **"수정"** 버튼 클릭

> ⚠️ 주의: 동일 연도/KPI 종류 조합의 중복 목표는 등록할 수 없습니다.

### 🗑️ 목표 삭제하기

1. **"목표 목록" 탭**에서 삭제할 목표의 **"🗑️ 삭제"** 버튼 클릭
2. 확인 모달에서 정보 확인
3. **"삭제"** 버튼 클릭

> ⚠️ 경고: 삭제된 목표는 복구할 수 없습니다.

### 📊 과거 이력 비교하기

1. **"과거 이력 비교" 탭** 선택
2. 비교할 KPI 선택 (불량율/F-COST/고객 불만 건수)
3. 최근 6년간의 목표값 변화 테이블 확인
4. 하단 통계 카드에서 요약 정보 확인:
   - 🔵 최신 목표
   - 🟢 최대 목표
   - 🟣 최소 목표

---

## 📏 입력 규칙

### 연도 제한
- ✅ 현재 연도: 2025년
- ✅ 과거 5년: 2020~2024년
- ❌ 미래 연도: 등록 불가

### 목표값 검증
- 0 이상의 값만 허용
- 소수점 최대 4자리까지 저장

### KPI 종류별 허용 단위

| KPI 종류 | 허용 단위 | 예시 |
|----------|-----------|------|
| 불량율 | %, ppm | 0.8% 또는 8000 ppm |
| F-COST | KRW (원) | 120000000 |
| 고객 불만 건수 | count (건) | 12 |

### 중복 방지
- 동일 연도 + 동일 KPI 종류 조합은 1건만 등록 가능
- 중복 시도 시: **"2025년의 불량율 목표가 이미 존재합니다."** 에러 발생

---

## 💡 활용 팁

### 1. 연간 계획 수립
매년 초, 전년도 실적을 참고하여 새로운 목표를 설정하세요.

```
예시: 2024년 불량율 실적 1.2% → 2025년 목표 0.8%
```

### 2. 개선 추이 모니터링
"과거 이력 비교" 탭을 활용하여 조직의 품질 개선 추세를 확인하세요.

### 3. 단위 통일
불량율의 경우, 조직 내부적으로 % 또는 ppm 중 하나로 단위를 통일하여 사용하는 것을 권장합니다.

---

## ❓ FAQ

### Q1. 미래 연도 목표를 미리 등록할 수 있나요?
**A:** 아니요. 현재 연도까지만 등록 가능합니다. (요구사항: 미래 KPI는 미리 정하지 않음)

### Q2. 월별 목표는 등록할 수 없나요?
**A:** 현재 시스템은 **연간 목표만** 지원합니다.

### Q3. 삭제한 목표를 복구할 수 있나요?
**A:** 아니요. 물리 삭제 방식으로 복구가 불가능합니다. 삭제 전 신중히 확인해주세요.

### Q4. % 단위와 ppm 단위 중 어떤 것을 사용해야 하나요?
**A:** 조직의 표준에 따라 선택하시면 됩니다. 변환 도구로 언제든 전환 가능합니다.
- % 단위: 일반적으로 이해하기 쉬움 (예: 0.8%)
- ppm 단위: 소량 불량 측정에 정밀함 (예: 8000 ppm)

### Q5. 같은 연도에 불량율 목표를 % 단위와 ppm 단위로 각각 등록할 수 있나요?
**A:** 아니요. 동일 연도의 동일 KPI는 1건만 등록 가능합니다. 단위 변환 기능을 사용하세요.

---

## 🔐 보안 및 감사

모든 KPI 목표 변경사항은 **감사 로그**에 기록됩니다:
- ✅ 등록: `CREATE_KPI_TARGET`
- ✅ 수정: `UPDATE_KPI_TARGET` (변경 사항 diff 포함)
- ✅ 삭제: `DELETE_KPI_TARGET`

관리자는 감사 로그를 통해 변경 이력을 추적할 수 있습니다.

---

## 📞 지원

문제가 발생하거나 추가 기능이 필요한 경우, 시스템 관리자에게 문의하세요.

**개발 문서:** `docs/kpi_targets_앱.md`

